import{_ as y,r as S,A as g,a as k,o as h,c as u,d as e,t as _,b as s,w as L,F as x,e as I,h as p,j as D,g as V,v as b,f as r}from"./index-89194b29.js";import{_ as n}from"./robotic-hand-dcc645d3.js";const E={data(){return{CompanyId:"",CarParkID:"",mode:"",ParkingServiceTimeList:{CarParkID:"",Zh_tw:"",En:"",CityCode:"",ServiceTag:"",ServiceDay:[],Description:"",StartTime:"",EndTime:"",FreeOfCharge:""},days:[{label:"星期一",day:"Monday",value:"1"},{label:"星期二",day:"Tuesday",value:"1"},{label:"星期三",day:"Wednesday",value:"1"},{label:"星期四",day:"Thursday",value:"1"},{label:"星期五",day:"Friday",value:"1"},{label:"星期六",day:"Saturday",value:"1"},{label:"星期日",day:"Sunday",value:"1"},{label:"國定假日",day:"NationalHolidays",value:"1"}]}},methods:{decodeGlobalCompanyId(){this.CarParkID=this.$route.params.CarParkID,this.CompanyId=this.$store.getters.getGlobalCompanyId,this.ParkingServiceTimeList.CarParkID=this.$route.params.CarParkID,this.ParkingServiceTimeList.CompanyId=this.$store.getters.getGlobalCompanyId},checkMode(){this.getCarParkNames(),this.mode=this.$route.params.mode,this.mode=="edit"&&(this.CarParkID=this.$route.params.CarParkID,this.ParkingServiceTimeList.CarParkID=this.$route.params.CarParkID,this.getParkingServiceTimeList())},getCarParkNames(){const l=`${g}/main/search/CarParkList`;this.$http.post(l,{CompanyId:this.CompanyId,CarParkID:this.CarParkID}).then(i=>{this.ParkingServiceTimeList.Zh_tw=i.data.data[0].Zh_tw,this.ParkingServiceTimeList.En=i.data.data[0].En,this.ParkingServiceTimeList.CityCode=i.data.data[0].CityCode})},getParkingServiceTimeList(){const l=`${g}/main/search/ParkingServiceTimeList`;this.$http.post(l,{CompanyId:this.CompanyId,CarParkID:this.CarParkID}).then(i=>{this.ParkingServiceTimeList=i.data.data[0],this.ParkingServiceTimeList.ServiceDay=i.data.data[0].ServiceDay.split(",")})},sendParkingServiceTimeList(){if(this.mode==="create"){const l=`${g}/main/create/ParkingServiceTimeList`;this.$http.post(l,this.ParkingServiceTimeList).then(i=>{i.data.message=="新增成功"&&(alert("路外停車場營業時間資料 新增成功"),S.push(`/carparks/${this.CarParkID}`))})}else if(this.mode==="edit"){const l=`${g}/main/update/ParkingServiceTimeList/${this.ParkingServiceTimeList.id}`;this.$http.post(l,this.ParkingServiceTimeList).then(i=>{i.data.message=="修改成功"&&(alert("路外停車場營業時間資料 修改成功"),this.getParkingServiceTimeList(),S.push(`/carparks/${this.CarParkID}`))})}},updateCheckboxValue(l,i){var P=document.getElementById(l.day),f=P.checked?"1":"0";this.ParkingServiceTimeList.ServiceDay[i]=f},validateTimeRange(){this.ParkingServiceTimeList.StartTime&&this.ParkingServiceTimeList.EndTime&&this.ParkingServiceTimeList.StartTime>=this.ParkingServiceTimeList.EndTime&&(alert("結束時間不得早於或等於開始時間"),this.ParkingServiceTimeList.StartTime="",this.ParkingServiceTimeList.EndTime="")}},mounted(){this.decodeGlobalCompanyId(),this.checkMode()}},w={class:"container"},F={class:"pt-3 text-center"},U={class:"mb-3 d-flex flex-column"},Z=e("label",{for:"CarParkID",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 業管機關訂定之停車場代碼 "),e("span",{class:"text-danger"},"*")],-1),M=e("div",{id:"CarParkIDHelp",class:"form-text"},[e("p",null,[r(" 該停車場代表編號"),e("br"),e("span",null,[r(" ※如果為私有停車場自行提供的停車場資料，CarParkID 代碼編碼方式，建議如下："),e("br"),e("span",{class:"text-danger"},'"公司統一編號" + "-"+ {3碼流水號}'),e("br"),r(" 主要是為了避免與各業管機關上傳之停車場代碼重複。"),e("br"),r(" 例：28412550-001 ")])])],-1),N={class:"mb-3 d-flex flex-column"},A=e("label",{for:"Zh_tw",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 停車場中文名稱 "),e("span",{class:"text-danger"},"*")],-1),O=e("div",{id:"Zh_twHelp",class:"form-text"},[e("p",null,"範例值: 板橋大遠百購物中心停車場")],-1),q={class:"mb-3 d-flex flex-column"},H=e("label",{for:"En",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 停車場英文名稱 (選填) ")],-1),B={class:"mb-3 d-flex flex-column"},G=e("label",{for:"ServiceTag",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 服務日標籤 (選填) ")],-1),R=e("div",{id:"ServiceTagHelp",class:"form-text"},[e("p",null,"服務日標籤，如：平日，假日，國定假日等自訂標籤名稱")],-1),j={class:"mb-3 d-flex flex-column"},W=e("label",{for:"ServiceDay",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 請勾選服務日 ")],-1),z=["id","checked","onUpdate:modelValue","onChange"],J=["for","onClick"],K={class:"mb-3 d-flex flex-column"},Q=e("label",{for:"Zh_tw",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 時段名稱描述 "),e("span",{class:"text-danger"},"*")],-1),X=e("div",{id:"DescriptionHelp",class:"form-text"},[e("p",null,"描述營業的時段")],-1),Y={class:"mb-3 d-flex flex-column"},$=e("label",{for:"Zh_tw",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 開始營業時間 "),e("span",{class:"text-danger"},"*")],-1),ee={class:"mb-3 d-flex flex-column"},ie=e("label",{for:"StartTime",class:"form-label"},[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 結束營業時間 "),e("span",{class:"text-danger"},"*")],-1),ae={class:"mb-3 d-flex flex-column"},te=e("label",null,[e("img",{src:n,alt:"form-icon",class:"form-icon"}),r(" 該時段是否免費 "),e("span",{class:"text-danger"},"*")],-1),se={key:0,class:"text-danger"},re={class:"d-flex"},le={class:"ms-1"},ne=["disabled"];function oe(l,i,P,f,a,c){const o=k("VField"),m=k("ErrorMessage"),C=k("VForm");return h(),u("div",w,[e("h1",F,_(a.mode=="create"?"新增":"編輯")+"路外停車場營業時間資料 ",1),s(C,{onSubmit:i[9]||(i[9]=T=>c.sendParkingServiceTimeList())},{default:L(({meta:T})=>[e("div",U,[Z,M,s(o,{name:"停車場代碼",id:"CarParkID",modelValue:a.ParkingServiceTimeList.CarParkID,"onUpdate:modelValue":i[0]||(i[0]=t=>a.ParkingServiceTimeList.CarParkID=t),type:"text",rules:"required",disabled:""},null,8,["modelValue"]),s(m,{class:"text-danger",name:"停車場代碼"})]),e("div",N,[A,O,s(o,{name:"停車場中文名稱",id:"Zh_tw",modelValue:a.ParkingServiceTimeList.Zh_tw,"onUpdate:modelValue":i[1]||(i[1]=t=>a.ParkingServiceTimeList.Zh_tw=t),type:"text",rules:"required",disabled:""},null,8,["modelValue"]),s(m,{class:"text-danger",name:"停車場中文名稱"})]),e("div",q,[H,s(o,{name:"停車場英文名稱",id:"En",modelValue:a.ParkingServiceTimeList.En,"onUpdate:modelValue":i[2]||(i[2]=t=>a.ParkingServiceTimeList.En=t),type:"text",disabled:""},null,8,["modelValue"]),s(m,{class:"text-danger",name:"停車場英文名稱"})]),e("div",B,[G,R,s(o,{name:"服務日標籤",id:"ServiceTag",modelValue:a.ParkingServiceTimeList.ServiceTag,"onUpdate:modelValue":i[3]||(i[3]=t=>a.ParkingServiceTimeList.ServiceTag=t),type:"text"},null,8,["modelValue"]),s(m,{class:"text-danger",name:"服務日標籤"})]),e("div",j,[W,(h(!0),u(x,null,I(a.days,(t,d)=>(h(),u("div",{class:"form-check",key:t.day},[p(e("input",{class:"form-check-input pe-3",type:"checkbox",id:t.day,checked:a.ParkingServiceTimeList.ServiceDay[d]==="1","onUpdate:modelValue":v=>a.ParkingServiceTimeList.ServiceDay[d]=v,onChange:v=>c.updateCheckboxValue(t,d)},null,40,z),[[D,a.ParkingServiceTimeList.ServiceDay[d]]]),e("label",{class:"form-check-label",for:t.day,onClick:v=>c.updateCheckboxValue(t,d)},_(t.label),9,J)]))),128))]),e("div",K,[Q,X,s(o,{name:"時段名稱描述",id:"Description",modelValue:a.ParkingServiceTimeList.Description,"onUpdate:modelValue":i[4]||(i[4]=t=>a.ParkingServiceTimeList.Description=t),type:"text",rules:"required"},null,8,["modelValue"]),s(m,{class:"text-danger",name:"時段名稱描述"})]),e("div",Y,[$,s(o,{name:"開始營業時間",id:"StartTime",modelValue:a.ParkingServiceTimeList.StartTime,"onUpdate:modelValue":i[5]||(i[5]=t=>a.ParkingServiceTimeList.StartTime=t),type:"time",onChange:c.validateTimeRange,rules:"required",style:{width:"120px"}},null,8,["modelValue","onChange"]),s(m,{class:"text-danger",name:"開始營業時間"})]),e("div",ee,[ie,s(o,{name:"結束營業時間",id:"EndTime",modelValue:a.ParkingServiceTimeList.EndTime,"onUpdate:modelValue":i[6]||(i[6]=t=>a.ParkingServiceTimeList.EndTime=t),type:"time",onChange:c.validateTimeRange,rules:"required",style:{width:"120px"}},null,8,["modelValue","onChange"]),s(m,{class:"text-danger",name:"結束營業時間"})]),e("div",ae,[te,a.ParkingServiceTimeList.FreeOfCharge==""?(h(),u("div",se," 該時段是否免費 為必填 ")):V("",!0),e("div",re,[e("label",null,[p(e("input",{class:"me-1",type:"radio",value:"1","onUpdate:modelValue":i[7]||(i[7]=t=>a.ParkingServiceTimeList.FreeOfCharge=t)},null,512),[[b,a.ParkingServiceTimeList.FreeOfCharge]]),r(" 是 ")]),e("label",le,[p(e("input",{class:"me-1",type:"radio",value:"0","onUpdate:modelValue":i[8]||(i[8]=t=>a.ParkingServiceTimeList.FreeOfCharge=t)},null,512),[[b,a.ParkingServiceTimeList.FreeOfCharge]]),r(" 否 ")])])]),e("button",{class:"btn btn-primary my-2",type:"submit",disabled:!T.valid}," 儲存 ",8,ne)]),_:1})])}const de=y(E,[["render",oe]]);export{de as default};
